{% if product %}
    {% set boxInclude = '@Storefront/storefront/component/product/card/box-minimal.html.twig'  %}

    {% block product_slider_lg %}
        <div class="container slider-lg">
            {% set countProduct = (product|length / 3)|round(0, 'ceil')%}
            {% set start = 0 %}
            {% set breakCount = 2 %}
            {% if countProduct <= 1 %}
                <div class="container col-12 d-flex justify-content-center">
                    <div class="row col-12 m-0 d-flex justify-content-center" >
                        {% for key, item in product %}
                            <div class="col-3 py-3">
                                {% sw_include boxInclude with {'product': item} %}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% else %}
                <div id="carouselIndicatorsLg" class="carousel slide w-100" data-bs-ride="carousel">
                    <ol class="carousel-indicators">
                        {% for key, i in 1..countProduct %}
                            <li style="background-color: gray" data-bs-target="#carouselIndicatorsLg" data-bs-slide-to="{{ key }}" class="
                            {% if key == 0 %}
                                active
                            {% endif %}
                            "></li>
                        {% endfor %}
                    </ol>
                    <div class="carousel-inner" >
                        {% for i in 1..countProduct %}
                            {% set break = false %}
                            <div class="carousel-item {% if loop.index == 1 %} active {% endif %}">
                                <div class="container col-12 d-flex justify-content-center">
                                    <div class="row col-12 m-0 d-flex justify-content-center" >

                                        {% for key, item in product %}
                                            {% if break == false %}
                                                {% if (key >= start) and (key <= breakCount) %}
                                                    <div class="col-3 pb-5 pt-3">
                                                        {% sw_include boxInclude with {'product': item} %}
                                                    </div>
                                                {% endif %}

                                                {% if breakCount == key %}
                                                    {% set break = true %}
                                                    {% set breakCount = breakCount + 3 %}
                                                    {% set start = start + 3 %}
                                                {% endif %}
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    <a class="carousel-control-prev" href="#carouselIndicatorsLg" role="button" data-bs-slide="prev">
                        {% sw_icon 'arrow-head-left' style { 'size': 'lg'} %}
                    </a>
                    <a class="carousel-control-next" href="#carouselIndicatorsLg" role="button" data-bs-slide="next">
                        {% sw_icon 'arrow-head-right' style { 'size': 'lg'} %}
                    </a>
                </div>
            {% endif %}
        </div>
    {% endblock %}

    {% block product_slider_md %}
        <div class="container slider-md">
            {% set countProduct = (product|length / 2)|round(0, 'ceil')%}
            {% set start = 0 %}
            {% set breakCount = 1 %}
            {% if countProduct <= 1 %}
            <div class="container col-12 d-flex justify-content-center">
                <div class="row col-12 m-0 d-flex justify-content-center" >
                    {% for key, item in product %}
                        <div class="col-5 py-3">
                            {% sw_include boxInclude with {'product': item} %}
                        </div>
                    {% endfor %}
                </div>
            </div>
            {% else %}
                <div id="carouselIndicatorsMd" class="carousel slide w-100" data-bs-ride="carousel">
                    <ol class="carousel-indicators">
                        {% for key, i in 1..countProduct %}
                            <li style="background-color: gray" data-bs-target="#carouselIndicatorsMd" data-bs-slide-to="{{ key }}" class="
                            {% if key == 0 %}
                                active
                            {% endif %}
                            "></li>
                        {% endfor %}
                    </ol>
                    <div class="carousel-inner" >
                        {% for i in 1..countProduct %}
                            {% set break = false %}
                            <div class="carousel-item {% if loop.index == 1 %} active {% endif %}">
                                <div class="container col-12 d-flex justify-content-center">
                                    <div class="row col-12 m-0 d-flex justify-content-center" >
                                        {% for key, item in product %}
                                            {% if break == false %}
                                                {% if ( (key >= start) and (key <= breakCount) ) %}
                                                    <div class="col-5 pb-5 pt-3">
                                                        {% sw_include boxInclude with {'product': item} %}
                                                    </div>
                                                {% endif %}

                                                {% if breakCount == key %}
                                                    {% set break = true %}
                                                    {% set breakCount = breakCount + 2 %}
                                                    {% set start = start + 2 %}
                                                {% endif %}
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    <a class="carousel-control-prev" href="#carouselIndicatorsMd" role="button" data-bs-slide="prev">
                        {% sw_icon 'arrow-head-left' style { 'size': 'lg'} %}
                    </a>
                    <a class="carousel-control-next" href="#carouselIndicatorsMd" role="button" data-bs-slide="next">
                        {% sw_icon 'arrow-head-right' style { 'size': 'lg'} %}
                    </a>
                </div>
            {% endif %}
        </div>
    {% endblock %}

    {% block product_slider_sm %}
        <div class="container slider-sm">
            {% set countProduct = (product|length / 1)|round(0, 'ceil')%}
            {% set start = 0 %}
            {% set breakCount = 0 %}
            {% if countProduct <= 1 %}
            <div class="container d-flex justify-content-center">
                <div class="row m-0 p0 d-flex justify-content-center">
                    {% for key, item in product %}
                        <div class="col-3 py-3">
                            {% sw_include boxInclude with {'product': item} %}
                        </div>
                    {% endfor %}
                </div>
            </div>
            {% else %}
                <div id="carouselIndicatorsSm" class="carousel slide w-100 py-0" data-bs-ride="carousel">
                    <ol class="carousel-indicators">
                        {% for key, i in 1..countProduct %}
                            <li style="background-color: gray" data-bs-target="#carouselIndicatorsSm" data-bs-slide-to="{{ key }}" class="
                            {% if key == 0 %}
                                active
                            {% endif %}
                            "></li>
                        {% endfor %}
                    </ol>
                    <div class="carousel-inner" >
                        {% for i in 1..countProduct %}
                            {% set break = false %}
                            <div class="carousel-item {% if loop.index == 1 %} active {% endif %}">
                                <div class="container col-12 d-flex justify-content-center">
                                    <div class="row col-12 m-0 d-flex justify-content-center" >
                                        {% for key, item in product %}
                                            {% if break == false %}
                                                {% if ( (key >= start) and (key <= breakCount) ) %}
                                                    <div class="col-10 px0 pb-5 pt-3">
                                                        {% sw_include boxInclude with {'product': item} %}
                                                    </div>
                                                {% endif %}

                                                {% if breakCount == key %}
                                                    {% set break = true %}
                                                    {% set breakCount = breakCount + 1 %}
                                                    {% set start = start + 1 %}
                                                {% endif %}
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    <a class="carousel-control-prev" href="#carouselIndicatorsSm" role="button" data-bs-slide="prev">
                        {% sw_icon 'arrow-head-left' style { 'size': 'lg'} %}
                    </a>
                    <a class="carousel-control-next" href="#carouselIndicatorsSm" role="button" data-bs-slide="next">
                        {% sw_icon 'arrow-head-right' style { 'size': 'lg'} %}
                    </a>
                </div>
            {% endif %}
        </div>
    {% endblock %}

{% endif %}