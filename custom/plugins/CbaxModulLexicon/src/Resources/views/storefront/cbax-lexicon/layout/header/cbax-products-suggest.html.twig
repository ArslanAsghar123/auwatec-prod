{% block cbax_lexicon_layout_header_products_suggest %}
    <div>
        <div class="cbax-lexicon-search-suggest-headline">{{ "cbaxLexiconSearch.product"|trans }}</div>
        <ul class="cbax-lexicon-search-suggest-list">

            {% for product in page.searchResult %}

                <li class="search-suggest-product js-result">

                    <a href="{{ seoUrl('frontend.detail.page', {'productId': product.id}) }}"
                       title="{{ product.translated.name }}"
                       class="search-suggest-product-link">
                        <div class="row align-items-center g-0">

                            <div class="col-auto search-suggest-product-image-container">
                                {% if product.cover.media.url and product.cover.media.isSpatialObject() == false %}
                                    {% sw_thumbnails 'search-suggest-product-image-thumbnails' with {
                                        media: product.cover.media,
                                        sizes: {
                                            'default': '100px'
                                        },
                                        attributes: {
                                            'class': 'search-suggest-product-image',
                                            'alt': (product.cover.media.translated.alt ?: ''),
                                            'title': (product.cover.media.translated.title ?: '')
                                        }
                                    } %}
                                {% else %}
                                    {% sw_icon 'placeholder' style {
                                        'size': 'lg'
                                    } %}
                                {% endif %}
                            </div>

                            <div class="col search-suggest-product-name">
                                {{ product.translated.name }}
                            </div>

                            <div class="col-auto search-suggest-product-price">
                                {% set price = product.calculatedPrice %}
                                {% if product.calculatedPrices.count > 0 %}
                                    {% set price = product.calculatedPrices.last %}
                                {% endif %}

                                {% if product.variantListingConfig.displayParent and product.parentId === null %}
                                    {% set displayFromVariants = price.unitPrice !== product.calculatedCheapestPrice.unitPrice %}
                                    {% set price = product.calculatedCheapestPrice %}
                                {% endif %}

                                {% set referencePrice = price.referencePrice %}

                                {% if product.calculatedPrices.count > 1 or displayFromVariants %}
                                    {{ "listing.listingTextFrom"|trans|sw_sanitize }}
                                {% endif %}
                                <span class="search-suggest-product-price">
                                    {{ price.unitPrice|currency }}{{ "general.star"|trans|sw_sanitize }}
                                </span>

                                {% if price.referencePrice is not null %}
                                    <br><small class="search-suggest-product-reference-price">({{ price.referencePrice.price|currency }}{{ "general.star"|trans|sw_sanitize }} / {{ price.referencePrice.referenceUnit }}&nbsp;{{ price.referencePrice.unitName }})</small>
                                {% endif %}

                                {% if price.regulationPrice.price is not null %}
                                    <small class="search-suggest-product-list-price">{{ "general.listPricePreviously"|trans({'%price%': price.regulationPrice.price|currency }) }}{{ "general.star"|trans|sw_sanitize }}</small>
                                {% endif %}
                            </div>

                        </div>
                    </a>

                </li>

            {% endfor %}

            {% if page.searchResult.total == 0 %}
                <li class="search-suggest-no-result">
                    {{ "header.searchNoResult"|trans|sw_sanitize }}
                </li>
            {% else %}

                <li class="js-result search-suggest-total">
                    <div class="row align-items-center g-0">

                        <div class="col">
                            <a href="{{ path('frontend.search.page') }}?search={{ page.searchTerm }}"
                               title="{{ "header.searchAllResults"|trans|striptags }}"
                               class="search-suggest-total-link">
                                {% sw_icon 'arrow-head-right' style { 'size': 'sm' } %}
                                {{ "header.searchAllResults"|trans|sw_sanitize }}
                            </a>
                        </div>

                        <div class="col-auto search-suggest-total-count">
                            {{ "header.searchResults"|trans({
                                '%count%': page.searchResult.total,
                            })|sw_sanitize }}
                        </div>

                    </div>
                </li>
            {% endif %}

        </ul>
    </div>
{% endblock %}
